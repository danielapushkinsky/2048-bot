var grid=[4][4],directional_scores={};function recursive(e,r){var t=Math.max(predictLeft(e)[1],predictRight(e)[1],predictUp(e)[1],predictDown(e)[1]);return 6==r?t/r:t/r+Math.max(recursive(predictLeft(e)[0],r+1),recursive(predictRight(e)[0],r+1),recursive(predictUp(e)[0],r+1),recursive(predictDown(e)[0],r+1))/r}function stuckPrevention(e,r){for(var t=0;t<4;t++)for(var i=0;i<4;i++)if(e[t][i]!=r[t][i])return 0;return 1/0}function predictLeft(e){for(var r=[],t=0,i=0;i<4;i++)r[i]=e[i].slice();for(var n=0;n<3;n++)for(i=0;i<4;i++)for(var o=0;o<3;o++)0==r[i][o]&&(r[i][o]=r[i][o+1],r[i][o+1]=0),2==n&&r[i][o]==r[i][o+1]&&(r[i][o]*=2,t+=r[i][o],r[i][o+1]=0);return[r,t]}function predictRight(e){for(var r=[],t=0,i=0;i<4;i++)r[i]=e[i].slice();for(var n=0;n<3;n++)for(i=0;i<4;i++)for(var o=3;o>0;o--)0==r[i][o]&&(r[i][o]=r[i][o-1],r[i][o-1]=0),2==n&&r[i][o]==r[i][o-1]&&(r[i][o]*=2,t+=r[i][o],r[i][o-1]=0);return[r,t]}function predictUp(e){for(var r=[],t=0,i=0;i<4;i++)r[i]=e[i].slice();for(var n=0;n<3;n++)for(i=0;i<4;i++)for(var o=0;o<3;o++)0==r[o][i]&&(r[o][i]=r[o+1][i],r[o+1][i]=0),2==n&&r[o][i]==r[o+1][i]&&(r[o][i]*=2,t+=r[o][i],r[o+1][i]=0);return[r,t]}function predictDown(e){for(var r=[],t=0,i=0;i<4;i++)r[i]=e[i].slice();for(var n=0;n<3;n++)for(i=0;i<4;i++)for(var o=3;o>0;o--)0==r[o][i]&&(r[o][i]=r[o-1][i],r[o-1][i]=0),2==n&&r[o][i]==r[o-1][i]&&(r[o][i]*=2,t+=r[o][i],r[o-1][i]=0);return[r,t]}function getGridInfo(){return[[getTileInfo(1,1),getTileInfo(2,1),getTileInfo(3,1),getTileInfo(4,1)],[getTileInfo(1,2),getTileInfo(2,2),getTileInfo(3,2),getTileInfo(4,2)],[getTileInfo(1,3),getTileInfo(2,3),getTileInfo(3,3),getTileInfo(4,3)],[getTileInfo(1,4),getTileInfo(2,4),getTileInfo(3,4),getTileInfo(4,4)]]}function getTileInfo(e,r){var t="tile-position-"+e+"-"+r,i=document.body.getElementsByClassName("container")[0].getElementsByClassName("game-container")[0].getElementsByClassName("tile-container")[0];try{return parseInt(i.getElementsByClassName(t+" tile-merged")[0].getElementsByClassName("tile-inner")[0].innerText)}catch(e){try{return parseInt(i.getElementsByClassName(t)[0].getElementsByClassName("tile-inner")[0].innerText)}catch(e){return 0}}}function pressKey(e){Podium={};var r=document.createEvent("KeyboardEvent");Object.defineProperty(r,"keyCode",{get:function(){return this.keyCodeVal}}),Object.defineProperty(r,"which",{get:function(){return this.keyCodeVal}}),r.initKeyboardEvent?r.initKeyboardEvent("keydown",!0,!0,document.defaultView,e,e,"","",!1,""):r.initKeyEvent("keydown",!0,!0,document.defaultView,!1,!1,!1,!1,e,0),r.keyCodeVal=e,document.body.dispatchEvent(r)}setInterval(function(){var e=predictLeft(grid=getGridInfo());directional_scores.left=e[1]+recursive(e[0],2)-stuckPrevention(grid,e[0]);e=predictRight(grid);directional_scores.right=e[1]+recursive(e[0],2)-stuckPrevention(grid,e[0]);e=predictUp(grid);directional_scores.up=e[1]+recursive(e[0],2)-stuckPrevention(grid,e[0]);e=predictDown(grid);directional_scores.down=e[1]+recursive(e[0],2)-stuckPrevention(grid,e[0]),directional_scores.down>=directional_scores.left&&directional_scores.down>=directional_scores.right&&directional_scores.down>=directional_scores.up?pressKey(40):directional_scores.left>=directional_scores.right&&directional_scores.left>=directional_scores.up?pressKey(37):directional_scores.right>=directional_scores.up?pressKey(39):pressKey(38)},250);
